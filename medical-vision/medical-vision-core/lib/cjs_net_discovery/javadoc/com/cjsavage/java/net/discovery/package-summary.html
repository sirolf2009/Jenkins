<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_09) on Mon Dec 17 04:43:33 GMT 2012 -->
<title>com.cjsavage.java.net.discovery (cjsavage.com Java Documentation)</title>
<meta name="date" content="2012-12-17">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.cjsavage.java.net.discovery (cjsavage.com Java Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../com/cjsavage/java/net/discovery/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em>cjsavage.com Java Documentation</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Package</li>
<li>Next Package</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/cjsavage/java/net/discovery/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.cjsavage.java.net.discovery</h1>
<div class="docSummary">
<div class="block">Provides service/server network discovery using UDP multicast datagram 
 packets.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.Listener.html" title="interface in com.cjsavage.java.net.discovery">ServiceAnnouncer.Listener</a></td>
<td class="colLast">
<div class="block">Interface for responding to ServerAnnouncer events.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../com/cjsavage/java/net/discovery/ServiceFinder.Listener.html" title="interface in com.cjsavage.java.net.discovery">ServiceFinder.Listener</a></td>
<td class="colLast">
<div class="block">Interface for receiving details of discovered servers and state change
 events for the ServiceFinder.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../com/cjsavage/java/net/discovery/ClientRequest.html" title="class in com.cjsavage.java.net.discovery">ClientRequest</a></td>
<td class="colLast">
<div class="block">Represents a client request for service information.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html" title="class in com.cjsavage.java.net.discovery">ServiceAnnouncer</a></td>
<td class="colLast">
<div class="block">Used to announce the presence of a server that provides specific services.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../com/cjsavage/java/net/discovery/ServiceFinder.html" title="class in com.cjsavage.java.net.discovery">ServiceFinder</a></td>
<td class="colLast">
<div class="block">Used to send requests for <a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceAnnouncer</code></a>s to respond to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../com/cjsavage/java/net/discovery/ServiceInfo.html" title="class in com.cjsavage.java.net.discovery">ServiceInfo</a></td>
<td class="colLast">
<div class="block">Describes a service that can be announced by a <a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceAnnouncer</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package com.cjsavage.java.net.discovery Description">Package com.cjsavage.java.net.discovery Description</h2>
<div class="block">Provides service/server network discovery using UDP multicast datagram 
 packets. 
 <h1>Announcing servers/services</h1>
 <p>Servers wishing to announce themselves on the network use the 
 <a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceAnnouncer</code></a> class to listen for 
 requests that match their registered services.  Services are defined with the
 <a href="../../../../../com/cjsavage/java/net/discovery/ServiceInfo.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceInfo</code></a> class
 and registered with the announcer using the 
 <a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html#addService(com.cjsavage.java.net.discovery.ServiceInfo)"><code>ServiceAnnouncer.addService(ServiceInfo)</code></a>
 method. The default group/port is 229.14.8.83:9814.</p>
 <p>Services are identified using a 32-character ID, the intention being that
 this ID is the MD5 sum of the package that is running the server making it
 highly unlikely to have ID conflicts on the same network.</p>
 <p>ServiceAnnouncer example:</p>
 <pre>
 private static final String SERVICE_ID = "e9ababe5872f24caf1a504f1d675470c";
 
 private String getLocalIp() {
     String ip;
     try{
         InetAddress ia = InetAddress.getLocalHost();
         ip = ia.getHostAddress();
     } catch (UnknownHostException e) { 
         System.out.println("Cannot determine system IP, using loopback.");
         ip = "127.0.0.1";
     }
     return ip;
 }
 
 private void initAnnouncer() {
     String ip = getLocalIp();
     ServiceAnnouncer announcer = new ServiceAnnouncer();
     ServiceInfo si = 
             new ServiceInfo("My Server", SERVICE_ID, ip, 3218, false);
     announcer.addService(si);
     announcer.startListening();
 }</pre>
 <p>You should shutdown the internal listener socket and thread with
 <code>announcer.stopListening()</code> when you are done or upon exiting your
 application.</p>
 <h1>Finder servers/services</h1>
 <p>To find servers on the network use the 
 <a href="../../../../../com/cjsavage/java/net/discovery/ServiceFinder.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceFinder</code></a> class. This class will
 send out a multicast request with the service ID to any listening 
 <a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceAnnouncer</code></a>s.  The ServiceFinder
 can receive responses either by multicast or a TCP socket.</p>
 <p>The ServiceFinder will tell the 
 <a href="../../../../../com/cjsavage/java/net/discovery/ServiceAnnouncer.html" title="class in com.cjsavage.java.net.discovery"><code>ServiceAnnouncer</code></a> 
 how to respond to it in the request. The response method is determined by the
 constructor used to instantiate the ServiceFinder. When he default constructor
 is used responses are received via multicast. If a port number is passed to
 the constructor, responses are received via a TCP socket on that port.</p> 
 <p>ServiceFinder example:</p>
 <pre>
 private static final String SERVICE_ID = "e9ababe5872f24caf1a504f1d675470c";

 private void initFinder() {
     // Receive responses via TCP port 1234
     // ServiceFinder finder = new ServiceFinder(1234);
     // Receive response via multicast 
     ServiceFinder finder = new ServiceFinder(); 
     finder.addListener(mListener);
     finder.startListening();
     finder.findServers(SERVICE_ID, 0);
 } 

 private ServiceFinder.Listener mListener = new ServiceFinder.Listener() {
     public void serverFound(ServiceInfo si, int requestId,
             ServiceFinder finder) {
         System.out.println("\r\nFound service provider named " +
                 si.getServerName() + " at " + si.getServiceHost() + ":" +
                 + si.getServicePort() + "\r\nCommand: ");
     }

     public void listenStateChanged(ServiceFinder finder, boolean listening) {
         if (listening) {
             System.out.println("ServiceFinder is listening for responses.");
         } else {
             System.out.println("ServiceFinder has shut down.");
         }
     }
 };
 </pre>
 <p>You should shutdown the internal listener socket and thread with
 <code>finder.stopListening()</code> when you are done or upon exiting your
 application.</p></div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>1.0</dd></dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../com/cjsavage/java/net/discovery/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em>cjsavage.com Java Documentation</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Package</li>
<li>Next Package</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/cjsavage/java/net/discovery/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
